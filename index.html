<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>文字列の中央寄せと右寄せ</title>
    <script language="javascript" type="text/javascript">
    function onClick(){
      var max=0;
      var text = document.getElementById("textarea").value;
      var s_text = text.split(/\n/);
      //最大文字数
      for(var i=0;i<s_text.length;i++){
        if(max<s_text[i].length){
          max = s_text[i].length;
        }
      }
      
      centralAlignment(max,s_text);
      centralAlignmentNone(max,s_text);
      rightalAlignment(max,s_text);
    }
    function centralAlignment(var max,var s_text) {
      var result = "";
      
      //変形
      for(var i=0;i<s_text.length;i++){
        var t = s_text[i];
        var count = max-t.length;
        for(var n=0; n<count;n++){
          if(i==0 && count>0 && n==0){
            result = result + "。";
          }else{
            result = result + "　";
          }
        }
        t = t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S]|^$/g).filter(Boolean);

        for(var j=0;j<t.length;j++){
          result = result + t[j]+"　";
        }
        for(var n=0; n<count;n++){
            result = result + "　";
        }
        result = result + "\n";
      }
      document.getElementById("out_1").value = result;
    }
      function centralAlignmentNone(var max,var s_text) {
      var result = "";
        
      //変形
      for(var i=0;i<s_text.length;i++){
        var t = s_text[i];
        var count = (max-t.length)/2;
        for(var n=0; n<count;n++){
          if(i==0 && count>0 && n==0){
            result = result + "。";
          }else{
            result = result + "　";
          }
        }
        result = result +t;
        for(var n=0; n<count;n++){
            result = result + "　";
        }
        result = result + "\n";
      }
      document.getElementById("out_2").value = result;
    }
    function rightalAlignment(var max,var s_text) {
      var result = "";
      //変形
      for(var i=0;i<s_text.length;i++){
        var t = s_text[i];
        var count = (max-t.length);
        for(var n=0; n<count;n++){
          if(i==0 && count>0 && n==0){
            result = result + "。";
          }else{
            result = result + "　";
          }
        }
        result = result +t;
        for(var n=0; n<count;n++){
            result = result + "　";
        }
        result = result + "\n";
      }
      document.getElementById("out_3").value = result;
    }
    </script>
  </head>
  <body>
    <h1 style="text-align:center;">文字列中央寄せと右寄せ</h1>
    <p>全角文字列を中央寄せします。<br/>下のボックスに文字列を入れてボタンを押すと、最大文字数の列に合わせて中央寄せをした文字列を返します。</p>
    <textarea id="textarea" rows="8" cols="50"></textarea>
    <button type="button" name="button" onclick="onClick();">寄せる</button>
    <p>中央寄せ（文字間あり）</p>
    <textarea id="out_1" rows="8" cols="50"></textarea>
    <p>中央寄せ（文字間なし）</p>
    <textarea id="out_2" rows="8" cols="50"></textarea>
    <p>右寄せ</p>
    <textarea id="out_3" rows="8" cols="50"></textarea>
    </div>
  </body>
</html>
