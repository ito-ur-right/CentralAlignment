<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>テキスト中央寄せ</title>
    <script language="javascript" type="text/javascript">
    function centralAlignment() {
      var max=0;
      var text = document.getElementById("textarea").value;
      var s_text = text.split(/\n/);
      var x =0;
      var result = "";
      //最大文字数
      for(var i=0;i<s_text.length;i++){
        if(max<s_text[i].length){
          max = s_text[i].length;
        }
      }
      //変形
      for(var i=0;i<s_text.length;i++){
        var t = s_text[i];
        var padding = "";
        var count = max-t.length;
        for(var n=0; n<count;n++){
          if(i==0 && count>0 && n==0){
            result = result + "。";
          }else{
            result = result + "　";
          }
        }
        t = t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S]|^$/g).filter(Boolean);

        result = result+padding;
        for(var j=0;j<t.length;j++){
          result = result + t[j]+"　";
        }
        for(var n=0; n<count;n++){
            result = result + "　";
        }
        result = result + padding + "\n";
      }
      document.getElementById("out_textarea").value = result;
    }
    </script>
  </head>
  <body>
    <h1 style="text-align:center;">文字列中央寄せ</h1>
    <p>全角文字列を中央寄せします。下のボックスに文字列を入れ「中央寄せする」を押すと、最大文字数の列に合わせて中央寄せをした文字列を返します。</p>
    <textarea id="textarea" rows="8" cols="50"></textarea>
    <button type="button" name="button" onclick="centralAlignment();">中央寄せする</button>
    <textarea id="out_textarea" rows="8" cols="50"></textarea>
    </div>
  </body>
</html>
